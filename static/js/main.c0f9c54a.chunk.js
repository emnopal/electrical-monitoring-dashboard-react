(this["webpackJsonpelectrical-monitoring-dashboard-react"]=this["webpackJsonpelectrical-monitoring-dashboard-react"]||[]).push([[0],{40:function(t,e,a){t.exports=a(52)},46:function(t,e,a){},51:function(t,e,a){},52:function(t,e,a){"use strict";a.r(e);var s=a(1),i=a.n(s),r=a(29),n=a.n(r),l=a(30);class c extends s.Component{componentDidMount(){this.createStockChart()}componentDidUpdate(){this.createStockChart()}createStockChart(){let t=[];t=this.props.data.map(t=>[new Date(1e3*(parseInt(t.timestamp)+25200)).getTime(),t[this.props.title]]).reverse(),l.stockChart("chart",{rangeSelector:{selected:1},title:{text:this.props.title},series:[{name:this.props.title,data:t,marker:{enabled:!0,radius:3},tooltip:{valueDecimals:2}}]})}render(){return i.a.createElement("div",{id:"chart"},"Highstock")}}var o=c,h=a(19),d=(a(46),a(14)),u=a(22),m=a(4);a(24),a(25);class p{static sortObj(t,e,a){const s=[...t];let i=1,r=-1;return"desc"===a&&(i=-1,r=1),s.sort((t,a)=>t[e]<a[e]?i:r)}static convertLocale(t){return new Date(1e3*t).toLocaleString("id-ID")}static findMean(t,e){const a=[...t],{length:s}=a;return a.reduce((t,a)=>t+a[e]/s,0)}static getArrFromObj(t,e){return p.sortObj(t,e).map(t=>t[e])}static findQuantile(t,e,a){const s=p.getArrFromObj(t,e),i=(s.length-1)*a,r=Math.floor(i),n=i-r;return void 0!==s[r+1]?s[r]+n*(s[r+1]-s[r]):s[r]}static findMedian(t,e){return p.findQuantile(t,e,.5)}static findStd(t,e){const a=p.findMean(t,e),s=p.getArrFromObj(t,e),i=s.map(t=>(t-a)**2);return Math.sqrt(i.reduce((t,e)=>t+e,0)/(s.length-1))}}var b=p;class g extends s.Component{constructor(t){super(t),this.state={title:t.title,data:t.data,units:t.units,highest:b.sortObj(t.data,t.title)[0][t.title],lowest:b.sortObj(t.data,t.title,"desc")[0][t.title],timeHighest:b.convertLocale(b.sortObj(t.data,t.title)[0].timestamp),timeLowest:b.convertLocale(b.sortObj(t.data,t.title,"desc")[0].timestamp),mean:b.findMean(t.data,t.title),median:b.findMedian(t.data,t.title),std:b.findStd(t.data,t.title),latestData:b.sortObj(t.data,"timestamp")[0][t.title],latestTime:b.convertLocale(b.sortObj(t.data,"timestamp")[0].timestamp),firstData:b.sortObj(t.data,"timestamp","desc")[0][t.title],firstTime:b.convertLocale(b.sortObj(t.data,"timestamp","desc")[0].timestamp)}}componentDidUpdate(t,e,a){t.title!==this.props.title&&t.data!==this.props.data&&this.setState({title:this.props.title,data:this.props.data,units:this.props.units,highest:b.sortObj(this.props.data,this.props.title)[0][this.props.title],lowest:b.sortObj(this.props.data,this.props.title,"desc")[0][this.props.title],timeHighest:b.convertLocale(b.sortObj(this.props.data,this.props.title)[0].timestamp),timeLowest:b.convertLocale(b.sortObj(this.props.data,this.props.title,"desc")[0].timestamp),mean:b.findMean(this.props.data,this.props.title),median:b.findMedian(this.props.data,this.props.title),std:b.findStd(this.props.data,this.props.title),latestData:b.sortObj(this.props.data,"timestamp")[0][this.props.title],latestTime:b.convertLocale(b.sortObj(this.props.data,"timestamp")[0].timestamp),firstData:b.sortObj(this.props.data,"timestamp","desc")[0][this.props.title],firstTime:b.convertLocale(b.sortObj(this.props.data,"timestamp","desc")[0].timestamp)})}renderOther(){return i.a.createElement("div",null,i.a.createElement("h6",null,"Mean ",this.state.title,": ",this.state.mean," ",this.state.units),i.a.createElement("h6",null,"Median ",this.state.title,": ",this.state.median," ",this.state.units),i.a.createElement("h6",null,"Standard Deviation ",this.state.title,": ",this.state.std," ",this.state.units),i.a.createElement("br",null),i.a.createElement("h6",null,"Highest ",this.state.title,": ",this.state.highest," ",this.state.units," (",this.state.timeHighest,")"),i.a.createElement("h6",null,"Lowest ",this.state.title,": ",this.state.lowest," ",this.state.units," (",this.state.timeLowest,")"),i.a.createElement("br",null),i.a.createElement("h6",null,"Latest Data of ",this.state.title,": ",this.state.latestData," ",this.state.units," (",this.state.latestTime,")"),i.a.createElement("h6",null,"First Data of ",this.state.title,": ",this.state.firstData," ",this.state.units," (",this.state.firstTime,")"))}renderCurrency(){return i.a.createElement("div",null,i.a.createElement("h6",null,"Mean ",this.state.title,": ",this.state.units,this.state.mean),i.a.createElement("h6",null,"Median ",this.state.title,": ",this.state.units,this.state.median),i.a.createElement("h6",null,"Standard Deviation ",this.state.title,": ",this.state.units,this.state.std),i.a.createElement("br",null),i.a.createElement("h6",null,"Highest ",this.state.title,": ",this.state.units,this.state.highest," (",this.state.timeHighest,")"),i.a.createElement("h6",null,"Lowest ",this.state.title,": ",this.state.units,this.state.lowest," (",this.state.timeLowest,")"),i.a.createElement("br",null),i.a.createElement("h6",null,"Latest Data of ",this.state.title,": ",this.state.units,this.state.latestData," (",this.state.latestTime,")"),i.a.createElement("h6",null,"First Data of ",this.state.title,": ",this.state.units,this.state.firstData," (",this.state.firstTime,")"))}render(){let t;return t="Total Price"===this.state.title?this.renderCurrency():this.renderOther(),i.a.createElement("div",null,t)}}var f=g,y=a(31),E=a(32),v=a(39),S=a(38),k=a(54),j=function(t){Object(v.a)(a,t);var e=Object(S.a)(a);function a(t){var s;return Object(y.a)(this,a),(s=e.call(this,t)).state={title:t.title,data:t.data},s}return Object(E.a)(a,[{key:"componentDidUpdate",value:function(t,e,a){t.title!==this.props.title&&t.data!==this.props.data&&this.setState({title:this.props.title,data:this.props.data})}},{key:"convertLocale",value:function(t){return new Date(1e3*t).toLocaleString("id-ID")}},{key:"render",value:function(){var t=this;return i.a.createElement(k.a,null,i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,this.state.title),i.a.createElement("th",null,"Timestamp"),i.a.createElement("th",null,"Readable Timestamp"))),i.a.createElement("tbody",null,this.state.data.map((function(e,a){return i.a.createElement("tr",{key:a},i.a.createElement("td",null,e[t.state.title]),i.a.createElement("td",null,e.timestamp),i.a.createElement("td",null,t.convertLocale(e.timestamp)))}))))}}]),a}(s.Component),O=a(33),w=a(16);const C=Object(O.a)({apiKey:"AIzaSyA_EQE5bF9HJf_Pc_S_xCYdB-dn7ikjkHs",authDomain:"electrical-monitoring-3303b.firebaseapp.com",databaseURL:"https://electrical-monitoring-3303b-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"electrical-monitoring-3303b",storageBucket:"electrical-monitoring-3303b.appspot.com",messagingSenderId:"206511979734",appId:"1:206511979734:web:289e6e6fe3af55b8b4dd77",measurementId:"G-VW6VGF11K4"}),D=Object(w.c)(C);var F=Object(w.d)(D);var L=t=>new Intl.DateTimeFormat("id-ID",{dateStyle:"full",timeStyle:"long",timeZone:"UTC"}).format(new Date(t));var M=(t,e)=>{const a={};return Object.keys(t).forEach(e=>{Object.keys(t[e]).forEach(s=>{const i=t[e][s],r=i.timestamp;a[r]=t[e][s],a[r].Current=parseFloat(i.Current),a[r].Energy=parseFloat(i.Energy),a[r].Frequency=parseFloat(i.Frequency),a[r].Power=parseFloat(i.Power),a[r]["Power Factor"]=parseFloat(i["Power Factor"]),a[r]["Total Price"]=parseFloat(i["Total Price"]),a[r].Voltage=parseFloat(i.Voltage),a[r].readable_timestamp=L(1e3*i.timestamp)})}),e?"json"===e.toLowerCase()?JSON.stringify(a,null,4):"array"===e.toLowerCase()?Object.values(a):JSON.stringify(a,null,4):a};var N=class{constructor(t){this.obj=t}getKeys(){if(Array.isArray(this.obj))throw"Must be Object";return Object.keys(this.obj)}getValue(t,e){let a=this.obj;return Array.isArray(a)?(a=this.sortObj(t,e),a.map(e=>e[t])):Object.values(a).map(e=>e[t])}getValueObj(t,e,a){return this.getValueAll(t,e,a)}getValueArr(t,e,a){return this.getValueAll(t,e,a,"array")}getValueAll(t,e,a,s){let i=0;("string"===typeof t||t instanceof String)&&(t=[t],i=1);const r=this.sortObj(null!==e&&void 0!==e?e:"timestamp",a);if("array"===s){const e=r.map(e=>t.map(t=>e[t]));return 1===i?e.flat(1):e}return r.map(e=>{const a={};return t.map(t=>{a[t]=e[t]}),a})}sortObj(t,e){const a=this.obj;let s=1,i=-1;if(!Array.isArray(a))throw"Must be Array";return"desc"===e&&(s=-1,i=1),a.sort((e,a)=>e[t]<a[t]?s:i)}getHighestObjByKey(t){return this.sortObj(t)[0]}getLowestObjByKey(t){return this.sortObj(t,"desc")[0]}getHighestValueByKey(t){return this.getHighestObjByKey(t)[t]}getLowestValueByKey(t){return this.getLowestObjByKey(t)[t]}},A=a(8),T=a.n(A),H=a(34),P=a.n(H),V=a(35),x=a.n(V);class I{static sortObj(t,e){const a=[...t];let s=1,i=-1;return"desc"===e&&(s=-1,i=1),a.sort((t,e)=>t<e?s:i)}static findMean(t){const e=[...t],{length:a}=e;return e.reduce((t,e)=>t+e/a,0)}static findSum(t){return[...t].reduce((t,e)=>t+e,0)}static findQuantile(t,e){const a=(t.length-1)*e,s=Math.floor(a),i=a-s;return void 0!==t[s+1]?t[s]+i*(t[s+1]-t[s]):t[s]}static findMedian(t){return I.findQuantile(t,.5)}static findStd(t){const e=I.findMean(t),a=t.map(t=>(t-e)**2);return Math.sqrt(I.findSum(a)/(t.length-1))}}var z=I;P()(T.a),x()(T.a);class B extends s.Component{componentDidUpdate(){this.createGaugeChart()}componentDidMount(){this.createGaugeChart()}createGaugeChart(){const t=this.props.data.map(t=>t[this.props.title]);T.a.chart("gaugeChart",{rangeSelector:{selected:1},chart:{type:"gauge"},title:{text:this.props.title},pane:{startAngle:-90,endAngle:90,background:null,center:["50%","75%"],size:"100%"},yAxis:{min:Math.min(...t),max:Math.max(...t),tickPixelInterval:72,tickPosition:"inside",tickColor:T.a.defaultOptions.chart.backgroundColor||"#FFFFFF",tickLength:20,tickWidth:2,minorTickInterval:null,labels:{distance:20,style:{fontSize:"14px"}},plotBands:[{from:Math.min(...t),to:z.findQuantile(t,.25),color:"#55BF3B",thickness:20},{from:z.findQuantile(t,.25),to:z.findQuantile(t,.75),color:"#DDDF0D",thickness:20},{from:z.findQuantile(t,.75),to:Math.max(...t),color:"#DF5353",thickness:20}]},series:[{name:this.props.title,data:[z.findMean(t)],tooltip:{valueSuffix:" "+this.props.units},dataLabels:{format:"Total Price"===this.props.title?this.props.units+"{y} ":"{y} "+this.props.units,borderWidth:0,color:T.a.defaultOptions.title&&T.a.defaultOptions.title.style&&T.a.defaultOptions.title.style.color||"#333333",style:{fontSize:"16px"}},dial:{radius:"80%",backgroundColor:"gray",baseWidth:12,baseLength:"0%",rearLength:"0%"},pivot:{backgroundColor:"gray",radius:6}}]})}render(){return i.a.createElement("div",null,i.a.createElement("div",{id:"gaugeChart"}))}}var W=B;class q extends s.Component{constructor(t){super(t),this.state={selected:0,data:h.cloneDeep([]),title:"init"},this.zeroSelected=this.zeroSelected.bind(this),this.currentSelected=this.keySelected.bind(this,1,"Current","A"),this.energySelected=this.keySelected.bind(this,2,"Energy","J"),this.frequencySelected=this.keySelected.bind(this,3,"Frequency","Hz"),this.powerFactorSelected=this.keySelected.bind(this,4,"Power Factor","W"),this.powerSelected=this.keySelected.bind(this,5,"Power","W"),this.priceSelected=this.keySelected.bind(this,6,"Total Price","Rp. "),this.voltageSelected=this.keySelected.bind(this,7,"Voltage","V")}async keySelected(t,e,a){const s=await Object(w.b)(Object(w.a)(F,"UsersData/lj5wFISAS5UhwklM3NVWReXmbpm2"));if(s.exists()){const i=M(s.val(),"array"),r=new N(i).getValueAll([e,"timestamp"],null,null,"object");this.setState({selected:t,data:h.cloneDeep(r),title:e,units:a})}}zeroSelected(){this.setState({selected:0,data:null,title:null})}zeroHandlerSelected(){return i.a.createElement(d.a,null,i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(d.a,null,i.a.createElement("h1",null,"Electrical Monitoring Dashboard"),"Note: Time in UTC+7 (Asia/Jakarta)"),i.a.createElement("br",null),i.a.createElement(u.a,{className:"justify-content-center"},i.a.createElement(m.a,{type:"button",className:"btn btn-highchart "+(0===this.state.selected?"active":""),onClick:this.zeroSelected},"Home"),i.a.createElement(m.a,{type:"button",className:"btn btn-highchart "+(1===this.state.selected?"active":""),onClick:this.currentSelected},"Current"),i.a.createElement(m.a,{type:"button",className:"btn btn-highchart "+(2===this.state.selected?"active":""),onClick:this.energySelected},"Energy"),i.a.createElement(m.a,{type:"button",className:"btn btn-highchart "+(3===this.state.selected?"active":""),onClick:this.frequencySelected},"Frequency"),i.a.createElement(m.a,{type:"button",className:"btn btn-highchart "+(4===this.state.selected?"active":""),onClick:this.powerFactorSelected},"Power Factor"),i.a.createElement(m.a,{type:"button",className:"btn btn-highchart "+(5===this.state.selected?"active":""),onClick:this.powerSelected},"Power"),i.a.createElement(m.a,{type:"button",className:"btn btn-highchart "+(6===this.state.selected?"active":""),onClick:this.priceSelected},"Total Price"),i.a.createElement(m.a,{type:"button",className:"btn btn-highchart "+(7===this.state.selected?"active":""),onClick:this.voltageSelected},"Voltage")),i.a.createElement("br",null),i.a.createElement(d.a,null,i.a.createElement("h1",null,"Welcome!")))}otherHandlerSelected(){return i.a.createElement(d.a,null,i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(d.a,null,i.a.createElement("h1",null,"Electrical Monitoring Dashboard"),"Note: Time in UTC+7 (Asia/Jakarta)"),i.a.createElement("br",null),i.a.createElement(u.a,{className:"justify-content-center"},i.a.createElement(m.a,{type:"button",className:"btn btn-highchart "+(0===this.state.selected?"active":""),onClick:this.zeroSelected},"Home"),i.a.createElement(m.a,{type:"button",className:"btn btn-highchart "+(1===this.state.selected?"active":""),onClick:this.currentSelected},"Current"),i.a.createElement(m.a,{type:"button",className:"btn btn-highchart "+(2===this.state.selected?"active":""),onClick:this.energySelected},"Energy"),i.a.createElement(m.a,{type:"button",className:"btn btn-highchart "+(3===this.state.selected?"active":""),onClick:this.frequencySelected},"Frequency"),i.a.createElement(m.a,{type:"button",className:"btn btn-highchart "+(4===this.state.selected?"active":""),onClick:this.powerFactorSelected},"Power Factor"),i.a.createElement(m.a,{type:"button",className:"btn btn-highchart "+(5===this.state.selected?"active":""),onClick:this.powerSelected},"Power"),i.a.createElement(m.a,{type:"button",className:"btn btn-highchart "+(6===this.state.selected?"active":""),onClick:this.priceSelected},"Total Price"),i.a.createElement(m.a,{type:"button",className:"btn btn-highchart "+(7===this.state.selected?"active":""),onClick:this.voltageSelected},"Voltage")),i.a.createElement("br",null),i.a.createElement(d.a,null,i.a.createElement("div",{className:"statHeaders"},i.a.createElement(f,{data:this.state.data,title:this.state.title,units:this.state.units}),i.a.createElement(W,{data:this.state.data,title:this.state.title,units:this.state.units})),i.a.createElement("br",null),i.a.createElement(o,{data:this.state.data,title:this.state.title}),i.a.createElement("br",null),i.a.createElement(j,{data:this.state.data,title:this.state.title})))}render(){let t;return t=0===this.state.selected?this.zeroHandlerSelected():this.otherHandlerSelected(),i.a.createElement("div",{className:"App"},t)}}var U=q;a(51);n.a.render(i.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",(function(){var t="".concat("/electrical-monitoring-dashboard-react","/service-worker.js");navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(t){console.error("Error during service worker registration:",t)}))}))}},[[40,1,2]]]);
//# sourceMappingURL=main.c0f9c54a.chunk.js.map